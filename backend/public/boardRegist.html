<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>게시글 작성</title>
  </head>

  <body>
    <table>
      <tr>
        <td>글제목</td>
        <td><input type="text" name="" id="boardTitle" /></td>
      </tr>
      <tr>
        <td>카테고리</td>
        <td>
          <select name="" id="boardCategory">
            <option value="notice">공지</option>
            <option value="free" selected>자유</option>
            <option value="actor">덕질</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>글내용</td>
        <td><textarea name="" id="boardContents" cols="50" rows="3"></textarea></td>
      </tr>
      <tr>
        <td>작성자</td>
        <td><input type="text" id="memberId" value="${memberId}"></input></td>
      </tr>
      <tr>
        <td colspan="2"><button id="btnSave" onclick="fnSave();">등록</button></td>
      </tr>
    </table>

    

    <!--Jquery 라이브러리 참조-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- 개발자 정의 클라이언트 스크립트 코드 -->
    <script>
      // 데이터 등록함수
      function fnSave() {
        // 백엔드 주소로 보낼 json데이터를 만든다.
        // ui 요소에서 사용자가 입력한 데이터로 서버로 전송할 json 데이터 구조의 속성에 데이터를 바인딩한다.
        let board = {
          boardTitle: $('#boardTitle').val(),
          boardCategory: $('#boardCategory').val(),
          boardContents: $('#boardContents').val(),
          memberId: $('#memberId').val()
        };

        // 백엔드 주소로 데이터를 보내 저장처리한다.
        $.post('http://localhost:3005/board/regist', board).done(function (response) {
          if (response.code == '200' || response.msg == 'OK') {
            alert('등록완료');
            // location.href = "./list.html";
          } else {
            alert('백엔드 호출에러발생');
            console.error('게시글 등록 서버에러 코드내용: ', response.code, response.msg);
          }
        });
      }
    </script>
  </body>
</html>
